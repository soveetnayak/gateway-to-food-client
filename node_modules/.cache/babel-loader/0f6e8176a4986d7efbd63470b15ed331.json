{"ast":null,"code":"import _slicedToArray from\"/home/soveet/Desktop/Study/DASS/Assignment 1/mern-stack-boilerplate-master (copy)/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from\"react\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import Paper from\"@mui/material/Paper\";import{useEffect,useState}from\"react\";import ls,{set}from\"local-storage\";import axios from\"axios\";import{Button}from\"@mui/material\";import Box from\"@mui/material/Box\";import{send}from\"emailjs-com\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function createData(_id,ItemName,PlacedTime,Quantity,BuyerName,AddOns,Status){return{_id:_id,ItemName:ItemName,PlacedTime:PlacedTime,Quantity:Quantity,BuyerName:BuyerName,AddOns:AddOns,Status:Status};}var initialrows=[createData(\"dgg\",\"Frozen yoghurt\",159,6.0,\"Me\",24,\"ACCEPTED\"),createData(\"dfdg\",\"Frozen yoghurt\",159,6.0,\"Me\",24,\"PLACED\")];export default function BasicTable(){var _useState=useState(initialrows),_useState2=_slicedToArray(_useState,2),rows=_useState2[0],setRows=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orders=_useState4[0],setOrders=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),sortedorders=_useState6[0],setSortedOrders=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),refresh=_useState8[0],setRefresh=_useState8[1];// Fill up the rows array with data.\nuseEffect(function(){// Get all documents from the database for orders for the particular vendor\naxios.post(\"https://gateway-to-food.herokuapp.com/vendor/showorders\",{manageremail:ls.get(\"email\")}).then(function(response){setOrders(response.data);setSortedOrders(response.data);console.log(response.data);}).catch(function(error){console.log(error);});},[refresh]);var handlenextstage=function handlenextstage(props){//If there are 10 orders already at ACCEPTED stage or COOKING stage, then no more orders can be accepted.\nif(props.status===\"PLACED\"){if(orders.length>=10){var count=0;for(var i=0;i<orders.length;i++){if(orders[i].status===\"ACCEPTED\"||orders[i].status===\"COOKING\"){count++;}}if(count>=10){alert(\"No more orders can be accepted\");return;}}}if(props.status===\"PLACED\"){send(\"service_3zc0qdz\",\"template_ucab5cz\",{from_name:props.vendoremail,shop_name:props.shopname,to_email:props.buyeremail,to_name:props.buyername,order_name:props.itemname},\"user_SVHvERvtGFxN2KIDkpKuM\").then(function(response){console.log(\"SUCCESS!\",response.status,response.text);}).catch(function(err){console.log(\"FAILED...\",err);});}axios.post(\"https://gateway-to-food.herokuapp.com/vendor/updateorderstatus\",{_id:props._id,aorr:\"a\"}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});setRefresh(!refresh);};var handlecancel=function handlecancel(props){send(\"service_3zc0qdz\",\"template_cmskl4x\",{from_name:props.vendoremail,shop_name:props.shopname,to_email:props.buyeremail,to_name:props.buyername,order_name:props.itemname},\"user_SVHvERvtGFxN2KIDkpKuM\").then(function(response){console.log(\"SUCCESS!\",response.status,response.text);}).catch(function(err){console.log(\"FAILED...\",err);});axios.post(\"https://gateway-to-food.herokuapp.com/vendor/updateorderstatus\",{_id:props._id,aorr:\"r\"}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});//refund\naxios.post(\"https://gateway-to-food.herokuapp.com/vendor/refund\",{email:props.buyeremail,amount:props.totalprice}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});setRefresh(!refresh);};return/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ItemName\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"PlacedTime\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Quantity\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"BuyerName\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"AddOns\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Total\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Action\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Cancel\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:orders.map(function(orders){return/*#__PURE__*/_jsxs(TableRow,{sx:{\"&:last-child td, &:last-child th\":{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:orders.itemname}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:new Date(orders.placedtime).toLocaleString()}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:orders.quantity}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:orders.buyername}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:orders.addonname.map(function(addons){return/*#__PURE__*/_jsx(\"div\",{children:addons},addons);})}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[\"Rs.\",orders.totalprice]}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:orders.status}),orders.status===\"REJECTED\"||orders.status===\"READY FOR PICKUP\"||orders.status===\"COMPLETED\"?/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",disabled:true,children:\"Next Stage\"})}):/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){return handlenextstage(orders);},children:\"Next stage\"})}),orders.status===\"PLACED\"?/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return handlecancel(orders);},children:\"Cancel\"})}):/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",disabled:true,children:\"Cancel\"})})]},orders._id);})})]})});}","map":{"version":3,"sources":["/home/soveet/Desktop/Study/DASS/Assignment 1/mern-stack-boilerplate-master (copy)/frontend/src/components/vendor/Orders.js"],"names":["React","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useEffect","useState","ls","set","axios","Button","Box","send","createData","_id","ItemName","PlacedTime","Quantity","BuyerName","AddOns","Status","initialrows","BasicTable","rows","setRows","orders","setOrders","sortedorders","setSortedOrders","refresh","setRefresh","post","manageremail","get","then","response","data","console","log","catch","error","handlenextstage","props","status","length","count","i","alert","from_name","vendoremail","shop_name","shopname","to_email","buyeremail","to_name","buyername","order_name","itemname","text","err","aorr","handlecancel","email","amount","totalprice","minWidth","map","border","Date","placedtime","toLocaleString","quantity","addonname","addons"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { useEffect, useState } from \"react\";\nimport ls, { set } from \"local-storage\";\nimport axios from \"axios\";\nimport { Button } from \"@mui/material\";\nimport Box from \"@mui/material/Box\";\nimport { send } from \"emailjs-com\";\nfunction createData(\n  _id,\n  ItemName,\n  PlacedTime,\n  Quantity,\n  BuyerName,\n  AddOns,\n  Status\n) {\n  return { _id, ItemName, PlacedTime, Quantity, BuyerName, AddOns, Status };\n}\n\nconst initialrows = [\n  createData(\"dgg\", \"Frozen yoghurt\", 159, 6.0, \"Me\", 24, \"ACCEPTED\"),\n  createData(\"dfdg\", \"Frozen yoghurt\", 159, 6.0, \"Me\", 24, \"PLACED\"),\n];\n\nexport default function BasicTable() {\n  const [rows, setRows] = useState(initialrows);\n  const [orders, setOrders] = useState([]);\n  const [sortedorders, setSortedOrders] = useState([]);\n\n  const [refresh, setRefresh] = useState(false);\n  // Fill up the rows array with data.\n  useEffect(() => {\n    // Get all documents from the database for orders for the particular vendor\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/vendor/showorders\", {\n        manageremail: ls.get(\"email\"),\n      })\n      .then((response) => {\n        setOrders(response.data);\n        setSortedOrders(response.data);\n        console.log(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, [refresh]);\n\n  const handlenextstage = (props) => {\n    //If there are 10 orders already at ACCEPTED stage or COOKING stage, then no more orders can be accepted.\n    if (props.status === \"PLACED\") {\n      if (orders.length >= 10) {\n        var count = 0;\n        for (var i = 0; i < orders.length; i++) {\n          if (\n            orders[i].status === \"ACCEPTED\" ||\n            orders[i].status === \"COOKING\"\n          ) {\n            count++;\n          }\n        }\n        if (count >= 10) {\n          alert(\"No more orders can be accepted\");\n          return;\n        }\n      }\n    }\n    if (props.status === \"PLACED\") {\n      send(\n        \"service_3zc0qdz\",\n        \"template_ucab5cz\",\n        {\n          from_name: props.vendoremail,\n          shop_name: props.shopname,\n          to_email: props.buyeremail,\n          to_name: props.buyername,\n          order_name: props.itemname,\n        },\n        \"user_SVHvERvtGFxN2KIDkpKuM\"\n      )\n        .then((response) => {\n          console.log(\"SUCCESS!\", response.status, response.text);\n        })\n        .catch((err) => {\n          console.log(\"FAILED...\", err);\n        });\n    }\n\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/vendor/updateorderstatus\", {\n        _id: props._id,\n        aorr: \"a\",\n      })\n      .then(function (response) {\n        console.log(response);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n    setRefresh(!refresh);\n  };\n\n  const handlecancel = (props) => {\n    send(\n      \"service_3zc0qdz\",\n      \"template_cmskl4x\",\n      {\n        from_name: props.vendoremail,\n        shop_name: props.shopname,\n        to_email: props.buyeremail,\n        to_name: props.buyername,\n        order_name: props.itemname,\n      },\n      \"user_SVHvERvtGFxN2KIDkpKuM\"\n    )\n      .then((response) => {\n        console.log(\"SUCCESS!\", response.status, response.text);\n      })\n      .catch((err) => {\n        console.log(\"FAILED...\", err);\n      });\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/vendor/updateorderstatus\", {\n        _id: props._id,\n        aorr: \"r\",\n      })\n      .then(function (response) {\n        console.log(response);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n    //refund\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/vendor/refund\", {\n        email: props.buyeremail,\n        amount: props.totalprice,\n      })\n      .then(function (response) {\n        console.log(response);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n    setRefresh(!refresh);\n  };\n\n  return (\n    <TableContainer component={Paper}>\n      <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell>ItemName</TableCell>\n            <TableCell align=\"right\">PlacedTime</TableCell>\n            <TableCell align=\"right\">Quantity</TableCell>\n            <TableCell align=\"right\">BuyerName</TableCell>\n            <TableCell align=\"right\">AddOns</TableCell>\n            <TableCell align=\"right\">Total</TableCell>\n            <TableCell align=\"right\">Status</TableCell>\n            <TableCell align=\"right\">Action</TableCell>\n            <TableCell align=\"right\">Cancel</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {orders.map((orders) => (\n            <TableRow\n              key={orders._id}\n              sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n            >\n              <TableCell component=\"th\" scope=\"row\">\n                {orders.itemname}\n              </TableCell>\n              {/* Convert number to unix time */}\n              <TableCell align=\"right\">\n                {new Date(orders.placedtime).toLocaleString()}\n              </TableCell>\n              <TableCell align=\"right\">{orders.quantity}</TableCell>\n              <TableCell align=\"right\">{orders.buyername}</TableCell>\n              <TableCell align=\"right\">\n                {/* map the list of addonname */}\n                {orders.addonname.map((addons) => (\n                  <div key={addons}>{addons}</div>\n                ))}\n              </TableCell>\n              <TableCell align=\"right\">Rs.{orders.totalprice}</TableCell>\n              <TableCell align=\"right\">{orders.status}</TableCell>\n\n              {orders.status === \"REJECTED\" ||\n              orders.status === \"READY FOR PICKUP\" ||\n              orders.status === \"COMPLETED\" ? (\n                <TableCell align=\"right\">\n                  <Button variant=\"contained\" color=\"primary\" disabled>\n                    Next Stage\n                  </Button>\n                </TableCell>\n              ) : (\n                <TableCell align=\"right\">\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={() => handlenextstage(orders)}\n                  >\n                    Next stage\n                  </Button>\n                </TableCell>\n              )}\n              {orders.status === \"PLACED\" ? (\n                <TableCell align=\"right\">\n                  <Button\n                    variant=\"contained\"\n                    onClick={() => handlecancel(orders)}\n                  >\n                    Cancel\n                  </Button>\n                </TableCell>\n              ) : (\n                <TableCell align=\"right\">\n                  <Button variant=\"contained\" disabled>\n                    Cancel\n                  </Button>\n                </TableCell>\n              )}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}