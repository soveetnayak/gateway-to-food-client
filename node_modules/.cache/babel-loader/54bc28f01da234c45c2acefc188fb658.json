{"ast":null,"code":"import _toConsumableArray from\"/home/soveet/Desktop/Study/DASS/Assignment 1/mern-stack-boilerplate-master (copy)/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/soveet/Desktop/Study/DASS/Assignment 1/mern-stack-boilerplate-master (copy)/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from\"react\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import Paper from\"@mui/material/Paper\";import{useEffect,useState}from\"react\";import ls,{set}from\"local-storage\";import axios from\"axios\";import{Button}from\"@mui/material\";import Box from\"@mui/material/Box\";import Stack from\"@mui/material/Stack\";import InputLabel from\"@mui/material/InputLabel\";import MenuItem from\"@mui/material/MenuItem\";import FormControl from\"@mui/material/FormControl\";import Select from\"@mui/material/Select\";import{createTheme}from\"@mui/material/styles\";import{deepOrange}from\"@mui/material/colors\";import{yellow}from\"@mui/material/colors\";import Chip from\"@mui/material/Chip\";import OutlinedInput from\"@mui/material/OutlinedInput\";import{TextField}from\"@mui/material\";import DialogTitle from\"@mui/material/DialogTitle\";import Dialog from\"@mui/material/Dialog\";import Checkbox from\"@mui/material/Checkbox\";import FormGroup from\"@mui/material/FormGroup\";import FormControlLabel from\"@mui/material/FormControlLabel\";import Rating from\"@mui/material/Rating\";import Fav from\"./Favourites\";import AppBar from\"@mui/material/AppBar\";import Toolbar from\"@mui/material/Toolbar\";import IconButton from\"@mui/material/IconButton\";import MenuIcon from\"@mui/icons-material/Menu\";import Typography from\"@mui/material/Typography\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Fuse=require(\"fuse.js\");function Print(){return/*#__PURE__*/_jsx(\"div\",{children:\"Meh...\"});}function checktime(i){if(i<10)//single digit\n{i=\"0\"+i;}return i;}var f=0;var array0=[];var array1=[];var array2=[];var array3=[];var shoptimings=[];//shopname, openingtime, closingtime\nexport default function Myitem(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),menu=_useState2[0],setMenu=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),refresh=_useState4[0],setRefresh=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),minprice=_useState8[0],setMinPrice=_useState8[1];var _useState9=useState(1000),_useState10=_slicedToArray(_useState9,2),maxprice=_useState10[0],setMaxPrice=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),open=_useState12[0],setOpen=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),selectedValue=_useState14[0],setSelectedValue=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),vegtrue=_useState16[0],setVegtrue=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),nonvegtrue=_useState18[0],setNonvegtrue=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),shopnames=_useState20[0],setShopnames=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),tags=_useState22[0],setTags=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),selectedshopnames=_useState24[0],setSelectedshopnames=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),selectedtags=_useState26[0],setSelectedtags=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),wallet=_useState28[0],setWallet=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),meh=_useState30[0],setMeh=_useState30[1];var handleClickOpen=function handleClickOpen(props){// console.log(props);\n//set selected value as props\nsetSelectedValue(props);console.log(selectedValue);setOpen(true);};var handleClose=function handleClose(value){setOpen(false);setSelectedValue(value);};// Fill up the rows array with data.\nuseEffect(function(){// Get all documents from the database for item for the particular vendor\naxios.post(\"https://gateway-to-food.herokuapp.com/buyer/showmenu\").then(function(res){setMenu(res.data);array0=res.data;//original\narray1=res.data;//original open\n//array2 = res.data; // original open filtered\n//array3 = res.data;\nsetShopnames(res.data.map(function(item){return item.shopname;}));//Remove duplicates\nvar shopnames=_toConsumableArray(new Set(res.data.map(function(item){return item.shopname;})));setShopnames(shopnames);//List of tags\nvar arrtags=[];res.data.forEach(function(item){for(var i=0;i<item.tags.length;i++){arrtags.push(item.tags[i]);}});//Remove duplicates from tags\nvar xtags=_toConsumableArray(new Set(arrtags));setTags(xtags);}).catch(function(err){console.log(err);});axios.post(\"https://gateway-to-food.herokuapp.com/buyer/walletdetails\",{email:ls.get(\"email\")}).then(function(res){setWallet(res.data.wallet);ls.set(\"wallet\",res.data.wallet);}).catch(function(err){console.log(err);});//Save opening and closing time of shops in arrays\naxios.post(\"https://gateway-to-food.herokuapp.com/buyer/shoptimings\").then(function(res){shoptimings=res.data;console.log(shoptimings);}).catch(function(err){console.log(err);});handlefilter(0);// setRefresh(true);\n// while(refresh === false){\n//   console.log(\"waiting\");\n// }\n},[refresh]);// setRefresh(true);\nvar handlefavourite=function handlefavourite(key){//add to favourites\naxios.post(\"https://gateway-to-food.herokuapp.com/buyer/addfavourite\",{_id:key,email:ls.get(\"email\")}).then(function(res){console.log(res);}).catch(function(err){console.log(err);});};var handlefilter=function handlefilter(props){//filter according to search keyword irrespective of case\nvar today=new Date();var h=today.getHours();var m=today.getMinutes();h=checktime(h);m=checktime(m);var time=h+\":\"+m;array1=array1.filter(function(item){var flag=false;for(var i=0;i<shoptimings.length;i++){if(item.manageremail===shoptimings[i].email&&shoptimings[i].opentime<=time&&shoptimings[i].closetime>=time){flag=true;}}return flag;});array3=array0.filter(function(item){return!array1.includes(item);});array2=array1;// const fuse = new Fuse(array2, {\n//   keys: [\"itemname\"],\n// })\nif(search!==\"\"){//implement fuzzy search\n// array2 = fuse.search(search);\narray2=array2.filter(function(item){return item.itemname.toLowerCase().includes(search.toLowerCase());});}//filter according to veg and nonveg\nif(vegtrue===true&&nonvegtrue===false){array2=array2.filter(function(item){return item.veg===true;});}else if(vegtrue===false&&nonvegtrue===true){array2=array2.filter(function(item){return item.veg===false;});}// //filter according to price\nif(minprice!==\"\"&&maxprice!==\"\"){array2=array2.filter(function(item){return item.price>=minprice&&item.price<=maxprice;});}else if(minprice!==\"\"){array2=array2.filter(function(item){return item.price>=minprice;});}else if(maxprice!==\"\"){array2=array2.filter(function(item){return item.price<=maxprice;});}else if(minprice===\"\"&&maxprice===\"\"){array2=array2.filter(function(item){return item.price>=0&&item.price<=100000;});}// //filter according to shopname\nif(selectedshopnames.length!==0){array2=array2.filter(function(item){return selectedshopnames.includes(item.shopname);});}//filter accoring to tags\nif(selectedtags.length!==0){array2=array2.filter(function(item){var flag=false;for(var i=0;i<item.tags.length;i++){if(selectedtags.includes(item.tags[i])){flag=true;}}return flag;});}if(props===1)//ascending by price\narray2=array2.sort(function(a,b){return a.price-b.price;});else if(props===2)//descending by price\narray2=array2.sort(function(a,b){return b.price-a.price;});else if(props===3){//ascending by rating\narray2=array2.sort(function(a,b)//take care of division by zero\n{if(a.ratingcount===0)return-1;else if(b.ratingcount===0)return 1;else return a.rating/a.ratingcount-b.rating/b.ratingcount;});}else if(props===4)//descending by rating\n{array2=array2.sort(function(a,b)//take care of division by zero\n{if(a.ratingcount===0)return 1;else if(b.ratingcount===0)return-1;else return b.rating/b.ratingcount-a.rating/a.ratingcount;});}//   const fuse1 = new Fuse(array3, {\n//     keys: [\"itemname\"],\n// })\nif(search!==\"\"){//implement fuzzy search\n// const result = fuse1.search(search);\n// //store all result.item in array3\n// for (var i = 0; i < result.length; i++) {\n//   array3.push(result[i].item);\narray3=array3.filter(function(item){return item.itemname.toLowerCase().includes(search.toLowerCase());});}//filter according to veg and nonveg\nif(vegtrue===true&&nonvegtrue===false){array3=array3.filter(function(item){return item.veg===true;});}else if(vegtrue===false&&nonvegtrue===true){array3=array3.filter(function(item){return item.veg===false;});}// //filter according to price\nif(minprice!==\"\"&&maxprice!==\"\"){array3=array3.filter(function(item){return item.price>=minprice&&item.price<=maxprice;});}else if(minprice!==\"\"){array3=array3.filter(function(item){return item.price>=minprice;});}else if(maxprice!==\"\"){array3=array3.filter(function(item){return item.price<=maxprice;});}else if(minprice===\"\"&&maxprice===\"\"){array3=array3.filter(function(item){return item.price>=0&&item.price<=100000;});}// //filter according to shopname\nif(selectedshopnames.length!==0){array3=array3.filter(function(item){return selectedshopnames.includes(item.shopname);});}//filter accoring to tags\nif(selectedtags.length!==0){array3=array3.filter(function(item){var flag=false;for(var i=0;i<item.tags.length;i++){if(selectedtags.includes(item.tags[i])){flag=true;}}return flag;});}if(props===1)//ascending by price\narray3=array3.sort(function(a,b){return a.price-b.price;});else if(props===2)//descending by price\narray3=array3.sort(function(a,b){return b.price-a.price;});else if(props===3)//ascending by rating\n{array3=array3.sort(function(a,b)//take care of division by zero\n{if(a.ratingcount===0)return-1;else if(b.ratingcount===0)return 1;else return a.rating/a.ratingcount-b.rating/b.ratingcount;});}else if(props===4)//descending by rating\n{array3=array3.sort(function(a,b)//take care of division by zero\n{if(a.ratingcount===0)return 1;else if(b.ratingcount===0)return-1;else return b.rating/b.ratingcount-a.rating/a.ratingcount;});}// Filter out only open shops\n//Store rest of the data in array3\nsetMenu(array2);//setSortedMenu(array2);\n// setSortedMenu2(array3);\n};return/*#__PURE__*/ (// Dont render until refresh is true\n//array2 and array3 is empty\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Box,{display:\"flex\",flexDirection:\"row\",alignItems:\"right\",justifyContent:\"right\",p:1,m:1,css:{maxWidth:\"100%\"},children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Wallet\",variant:\"filled\",value:wallet,InputProps:{readOnly:true}})}),/*#__PURE__*/_jsx(Box,{display:\"flex\",flexDirection:\"row\",alignItems:\"right\",justifyContent:\"right\",p:1,m:1,css:{maxWidth:\"100%\"},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){handlefilter(0);},children:\"Set/Reset\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1},children:/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{variant:\"dense\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"large\",edge:\"start\",color:\"inherit\",\"aria-label\":\"menu\",sx:{mr:2},children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"Favourites\"})]})})}),/*#__PURE__*/_jsx(Fav,{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{\"& > :not(style)\":{m:1,width:\"25ch\"}},noValidate:true,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Search\",variant:\"outlined\"//Search for items which includes the word and refresh the menu\n//lowercase\n,onChange:function onChange(e){setSearch(e.target.value);}}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:vegtrue,label:\"Veg\"//pass checkbox value to handlecheckboxes\n,onChange:function onChange(e){setVegtrue(e.target.checked);},inputProps:{\"aria-label\":\"primary checkbox\"}}),label:\"Veg\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:nonvegtrue,label:\"Non-Veg\",onChange:function onChange(e){setNonvegtrue(e.target.checked);},inputProps:{\"aria-label\":\"primary checkbox\"}}),label:\"Non-Veg\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{\"& > :not(style)\":{m:1,width:\"25ch\",height:\"7ch\"}},noValidate:true,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Minimum Price\",variant:\"outlined\",type:\"number\",onChange:function onChange(e){setMinPrice(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Maximum Price\",variant:\"outlined\",type:\"number\",onChange:function onChange(e){setMaxPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{\"& > :not(style)\":{m:1,width:\"25ch\"}},noValidate:true,autoComplete:\"off\",children:[/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-simple-select-outlined-label\",children:\"Select Shop\"}),/*#__PURE__*/_jsx(Select,{labelId:\"demo-simple-select-outlined-label\",id:\"demo-simple-select-outlined\",defaultValue:\"\",multiple:true,value:selectedshopnames,onChange:function onChange(e){setSelectedshopnames(e.target.value);},label:\"Select Shop\",children:shopnames.map(function(item){return/*#__PURE__*/_jsx(MenuItem,{value:item,children:item},item);})})]}),/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-simple-select-outlined-label\",children:\"Select Tags\"}),/*#__PURE__*/_jsx(Select,{labelId:\"demo-simple-select-outlined-label\",id:\"demo-simple-select-outlined\",defaultValue:\"\",multiple:true,value:selectedtags,onChange:function onChange(e){setSelectedtags(e.target.value);},label:\"Select Tags\",children:tags.map(function(item){return/*#__PURE__*/_jsx(MenuItem,{value:item,children:item},item);})})]})]}),/*#__PURE__*/_jsx(Box,{component:\"form\",sx:{\"& > :not(style)\":{m:1,width:\"25ch\",height:\"7ch\"}},noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){handlefilter(0);},children:\"Filter\"})}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{\"& > :not(style)\":{m:1,width:\"25ch\",height:\"7ch\"}},noValidate:true,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){handlefilter(1);},children:\"Ascending by Price\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){handlefilter(2);},children:\"Descending by Price\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){handlefilter(3);},children:\"Ascending by Rating\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){handlefilter(4);},children:\"Descending by Rating\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1},children:/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{variant:\"dense\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"large\",edge:\"start\",color:\"inherit\",\"aria-label\":\"menu\",sx:{mr:2},children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"Menu\"})]})})})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ItemName\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Image\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"ShopName\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Price\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Veg/Non-Veg\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Tags\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"AddOns\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Rating\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:array2.map(function(row){return/*#__PURE__*/_jsxs(TableRow,{sx:{\"&:last-child td, &:last-child th\":{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:row.itemname}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"img\",{src:row.image,alt:\"food\",style:{width:\"120px\",height:\"100px\"}})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.shopname}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[\"Rs.\",row.price]}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.veg===true?\"Veg\":\"Non-Veg\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.tags.map(function(tag){return/*#__PURE__*/_jsx(\"div\",{spacing:2,children:/*#__PURE__*/_jsx(Stack,{spacing:2,children:/*#__PURE__*/_jsx(Chip,{label:tag},tag)})},tag);})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.addonname.map(function(addon,index){return/*#__PURE__*/_jsx(\"div\",{spacing:2,children:/*#__PURE__*/_jsx(Stack,{spacing:2,children:/*#__PURE__*/_jsx(Chip,{label:\"\".concat(addon,\": Rs.\").concat(row.addonprice[index])},index)})},index);})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Rating,{name:\"read-only\"//value = floor(row.rating)/row.ratingcount\n,value:row.ratingcount===0?0:Math.floor(row.rating/row.ratingcount),readOnly:true,size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){return handlefavourite(row._id);},children:\"Add to Favourites\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){return handleClickOpen(row._id);},children:\"Buy\"})})]},row._id);})})]})}),open?/*#__PURE__*/_jsx(SimpleDialog,{selectedValue:selectedValue,open:open,onClose:handleClose}):null]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1},children:/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{variant:\"dense\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"large\",edge:\"start\",color:\"inherit\",\"aria-label\":\"menu\",sx:{mr:2},children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"Menu (Not Open)\"})]})})})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ItemName\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Image\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"ShopName\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Price\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Veg/Non-Veg\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Tags\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"AddOns\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Rating\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:array3.map(function(row){return/*#__PURE__*/_jsxs(TableRow,{sx:{\"&:last-child td, &:last-child th\":{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:row.itemname}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"img\",{src:row.image,alt:\"food\",style:{width:\"120px\",height:\"100px\"}})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.shopname}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[\"Rs.\",row.price]}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.veg===true?\"Veg\":\"Non-Veg\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.tags.map(function(tag){return/*#__PURE__*/_jsx(\"div\",{spacing:2,children:/*#__PURE__*/_jsx(Stack,{spacing:2,children:/*#__PURE__*/_jsx(Chip,{label:tag},tag)})},tag);})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:row.addonname.map(function(addon,index){return/*#__PURE__*/_jsx(\"div\",{spacing:2,children:/*#__PURE__*/_jsx(Stack,{spacing:2,children:/*#__PURE__*/_jsx(Chip,{label:\"\".concat(addon,\": Rs.\").concat(row.addonprice[index])},index)})},index);})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Rating,{name:\"read-only\",value:row.ratingcount===0?0:Math.floor(row.rating/row.ratingcount),readOnly:true,size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){return handlefavourite(row._id);},children:\"Add to Favourites\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",disabled:true,onClick:function onClick(){return handleClickOpen(row._id);},children:\"Buy\"})})]},row._id);})})]})}),open?/*#__PURE__*/_jsx(SimpleDialog,{selectedValue:selectedValue,open:open,onClose:handleClose}):null]})]}));}function SimpleDialog(props){var onClose=props.onClose,selectedValue=props.selectedValue,open=props.open;var _useState31=useState(1),_useState32=_slicedToArray(_useState31,2),quantity=_useState32[0],setQuantity=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),itemname=_useState34[0],setItemname=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),shopname=_useState36[0],setShopname=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),vendoremail=_useState38[0],setVendoremail=_useState38[1];var _useState39=useState(0),_useState40=_slicedToArray(_useState39,2),price=_useState40[0],setPrice=_useState40[1];var _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),addonname=_useState42[0],setAddonname=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),addonprice=_useState44[0],setAddonprice=_useState44[1];var _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),selectedaddonname=_useState46[0],setSelectedaddonname=_useState46[1];var _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),selectedaddonprice=_useState48[0],setSelectedaddonprice=_useState48[1];var _useState49=useState(0),_useState50=_slicedToArray(_useState49,2),totalprice=_useState50[0],setTotalprice=_useState50[1];var handleClose=function handleClose(){onClose();};var handlebuy=function handlebuy(){//get time in int\nvar time=new Date().getTime();// convert quantity to int\nvar q=parseInt(quantity);var p=parseInt(price);// run loop on addonprice\nfor(var i=0;i<selectedaddonprice.length;i++){// convert addonprice to int\nvar ap=parseInt(selectedaddonprice[i]);// add addonprice to p\np=p+ap;}// add quantity to p\np=p*q;if(p>ls.get(\"wallet\")){alert(\"Insufficient Balance\");onClose();}else{console.log({itemname:itemname,shopname:shopname,price:price,addonname:selectedaddonname,addonprice:selectedaddonprice,quantity:q,totalprice:p,time:time});axios.post(\"https://gateway-to-food.herokuapp.com/buyer/orderitem\",{item_id:selectedValue,itemname:itemname,vendoremail:vendoremail,shopname:shopname,buyeremail:ls.get(\"email\"),buyername:ls.get(\"username\"),placedtime:time,quantity:q,addonname:selectedaddonname,addonprice:selectedaddonprice,totalprice:p}).then(function(res){console.log(res);}).catch(function(err){console.log(err);});//deduct money\naxios.post(\"https://gateway-to-food.herokuapp.com/buyer/deductmoney\",{email:ls.get(\"email\"),amount:p}).then(function(res){console.log(res);}).catch(function(err){console.log(err);});onClose();}};var _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),refresh=_useState52[0],setRefresh=_useState52[1];useEffect(function(){axios.post(\"https://gateway-to-food.herokuapp.com/buyer/getitem\",{_id:selectedValue}).then(function(res){setItemname(res.data.itemname);setShopname(res.data.shopname);setPrice(res.data.price);setAddonname(res.data.addonname);setAddonprice(res.data.addonprice);setVendoremail(res.data.manageremail);}).catch(function(err){console.log(err);});if(selectedValue===\"\"||selectedValue===undefined){setRefresh(!refresh);}},[refresh]);return/*#__PURE__*/_jsxs(Dialog,{onClose:handleClose,open:open,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"A few more steps...\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"ItemName\",variant:\"outlined\",value:itemname,InputProps:{readOnly:true}}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"ShopName\",variant:\"outlined\",value:shopname,InputProps:{readOnly:true}}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Price\",variant:\"outlined\",value:price,InputProps:{readOnly:true}}),/*#__PURE__*/_jsx(TextField,{id:\"quantity\",label:\"Quantity\",type:\"number\",variant:\"outlined\",defaultValue:1,onChange:function onChange(e){setQuantity(e.target.value);}}),/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-simple-select-outlined-label\",children:\"AddOns\"}),/*#__PURE__*/_jsx(Select,{labelId:\"demo-simple-select-outlined-label\",id:\"demo-simple-select-outlined\",multiple:true,value:selectedaddonname,onChange:function onChange(e){setSelectedaddonname(e.target.value);// Set selectedaddonprice as the same index as selectedaddonname\nsetSelectedaddonprice(e.target.value.map(function(addon){return addonprice[addonname.indexOf(addon)];}));},label:\"AddOns\",variant:\"outlined\",children:addonname.map(function(addon){return/*#__PURE__*/_jsx(MenuItem,{value:addon,children:addon},addon);})})]})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handlebuy,children:\"Buy\"})]});}","map":{"version":3,"sources":["/home/soveet/Desktop/Study/DASS/Assignment 1/mern-stack-boilerplate-master (copy)/frontend/src/components/buyer/BuyerDashboard.js"],"names":["React","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useEffect","useState","ls","set","axios","Button","Box","Stack","InputLabel","MenuItem","FormControl","Select","createTheme","deepOrange","yellow","Chip","OutlinedInput","TextField","DialogTitle","Dialog","Checkbox","FormGroup","FormControlLabel","Rating","Fav","AppBar","Toolbar","IconButton","MenuIcon","Typography","Fuse","require","Print","checktime","i","f","array0","array1","array2","array3","shoptimings","Myitem","menu","setMenu","refresh","setRefresh","search","setSearch","minprice","setMinPrice","maxprice","setMaxPrice","open","setOpen","selectedValue","setSelectedValue","vegtrue","setVegtrue","nonvegtrue","setNonvegtrue","shopnames","setShopnames","tags","setTags","selectedshopnames","setSelectedshopnames","selectedtags","setSelectedtags","wallet","setWallet","meh","setMeh","handleClickOpen","props","console","log","handleClose","value","post","then","res","data","map","item","shopname","Set","arrtags","forEach","length","push","xtags","catch","err","email","get","handlefilter","handlefavourite","key","_id","today","Date","h","getHours","m","getMinutes","time","filter","flag","manageremail","opentime","closetime","includes","itemname","toLowerCase","veg","price","sort","a","b","ratingcount","rating","maxWidth","readOnly","flexGrow","mr","width","e","target","checked","height","minWidth","row","border","image","tag","addonname","addon","index","addonprice","Math","floor","SimpleDialog","onClose","quantity","setQuantity","setItemname","setShopname","vendoremail","setVendoremail","setPrice","setAddonname","setAddonprice","selectedaddonname","setSelectedaddonname","selectedaddonprice","setSelectedaddonprice","totalprice","setTotalprice","handlebuy","getTime","q","parseInt","p","ap","alert","item_id","buyeremail","buyername","placedtime","amount","undefined","indexOf"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { useEffect, useState } from \"react\";\nimport ls, { set } from \"local-storage\";\nimport axios from \"axios\";\nimport { Button } from \"@mui/material\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport { createTheme } from \"@mui/material/styles\";\nimport { deepOrange } from \"@mui/material/colors\";\nimport { yellow } from \"@mui/material/colors\";\nimport Chip from \"@mui/material/Chip\";\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\nimport { TextField } from \"@mui/material\";\nimport PropTypes from \"prop-types\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport Dialog from \"@mui/material/Dialog\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport FormGroup from \"@mui/material/FormGroup\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport Rating from \"@mui/material/Rating\";\nimport Fav from \"./Favourites\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport IconButton from \"@mui/material/IconButton\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport Typography from \"@mui/material/Typography\";\n\nconst Fuse = require(\"fuse.js\");\n\nSimpleDialog.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n  selectedValue: PropTypes.string.isRequired,\n};\n\nfunction Print() {\n  return <div>Meh...</div>;\n}\n\nfunction checktime(i) {\n  if(i < 10) //single digit\n  {\n    i = \"0\" + i;\n\n  }\n  return i;\n}\nvar f = 0;\nvar array0 = [];\nvar array1 = [];\nvar array2 = [];\nvar array3 = [];\nvar shoptimings = []; //shopname, openingtime, closingtime\n\nexport default function Myitem() {\n  const [menu, setMenu] = useState([]);\n\n  const [refresh, setRefresh] = useState(false);\n\n  const [search, setSearch] = useState(\"\");\n  const [minprice, setMinPrice] = useState(0);\n  const [maxprice, setMaxPrice] = useState(1000);\n\n  const [open, setOpen] = useState(false);\n  const [selectedValue, setSelectedValue] = useState(\"\");\n  const [vegtrue, setVegtrue] = useState(true);\n  const [nonvegtrue, setNonvegtrue] = useState(true);\n\n  const [shopnames, setShopnames] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [selectedshopnames, setSelectedshopnames] = useState([]);\n  const [selectedtags, setSelectedtags] = useState([]);\n\n  const [wallet, setWallet] = useState(0);\n\n  const [meh, setMeh] = useState(false);\n\n  const handleClickOpen = (props) => {\n    // console.log(props);\n    //set selected value as props\n    setSelectedValue(props);\n    console.log(selectedValue);\n    setOpen(true);\n  };\n\n  const handleClose = (value) => {\n    setOpen(false);\n    setSelectedValue(value);\n  };\n\n  // Fill up the rows array with data.\n  useEffect(() => {\n    // Get all documents from the database for item for the particular vendor\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/buyer/showmenu\")\n      .then((res) => {\n        setMenu(res.data);\n        array0 = res.data; //original\n        array1 = res.data; //original open\n        //array2 = res.data; // original open filtered\n        //array3 = res.data;\n\n        setShopnames(res.data.map((item) => item.shopname));\n        //Remove duplicates\n        const shopnames = [...new Set(res.data.map((item) => item.shopname))];\n        setShopnames(shopnames);\n        //List of tags\n        var arrtags = [];\n        res.data.forEach((item) => {\n          for (var i = 0; i < item.tags.length; i++) {\n            arrtags.push(item.tags[i]);\n          }\n        });\n        //Remove duplicates from tags\n        const xtags = [...new Set(arrtags)];\n        setTags(xtags);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/buyer/walletdetails\", {\n        email: ls.get(\"email\"),\n      })\n      .then((res) => {\n        setWallet(res.data.wallet);\n        ls.set(\"wallet\", res.data.wallet);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    //Save opening and closing time of shops in arrays\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/buyer/shoptimings\")\n      .then((res) => {\n        shoptimings = res.data;\n        console.log(shoptimings);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    handlefilter(0);\n    // setRefresh(true);\n    // while(refresh === false){\n    //   console.log(\"waiting\");\n    // }\n  }, [refresh]);\n\n  // setRefresh(true);\n  const handlefavourite = (key) => {\n    //add to favourites\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/buyer/addfavourite\", {\n        _id: key,\n        email: ls.get(\"email\"),\n      })\n      .then((res) => {\n        console.log(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handlefilter = (props) => {\n    //filter according to search keyword irrespective of case\n    var today = new Date();\n    var h = today.getHours();\n    var m = today.getMinutes();\n    h = checktime(h);\n    m = checktime(m);\n    var time = h + \":\" + m;\n\n    array1 = array1.filter((item) => {\n      var flag = false;\n      for (var i = 0; i < shoptimings.length; i++) {\n        if (\n          item.manageremail === shoptimings[i].email &&\n          shoptimings[i].opentime <= time &&\n          shoptimings[i].closetime >= time\n        ) {\n          flag = true;\n        }\n      }\n      return flag;\n    });\n\n    array3 = array0.filter((item) => !array1.includes(item));\n\n    array2 = array1;\n\n    // const fuse = new Fuse(array2, {\n    //   keys: [\"itemname\"],\n    // })\n\n    if (search !== \"\") {\n      //implement fuzzy search\n      // array2 = fuse.search(search);\n      array2 = array2.filter((item) =>\n        item.itemname.toLowerCase().includes(search.toLowerCase())\n      );\n    }\n\n    //filter according to veg and nonveg\n    if (vegtrue === true && nonvegtrue === false) {\n      array2 = array2.filter((item) => item.veg === true);\n    } else if (vegtrue === false && nonvegtrue === true) {\n      array2 = array2.filter((item) => item.veg === false);\n    }\n    // //filter according to price\n    if (minprice !== \"\" && maxprice !== \"\") {\n      array2 = array2.filter(\n        (item) => item.price >= minprice && item.price <= maxprice\n      );\n    } else if (minprice !== \"\") {\n      array2 = array2.filter((item) => item.price >= minprice);\n    } else if (maxprice !== \"\") {\n      array2 = array2.filter((item) => item.price <= maxprice);\n    } else if (minprice === \"\" && maxprice === \"\") {\n      array2 = array2.filter((item) => item.price >= 0 && item.price <= 100000);\n    }\n    // //filter according to shopname\n    if (selectedshopnames.length !== 0) {\n      array2 = array2.filter((item) =>\n        selectedshopnames.includes(item.shopname)\n      );\n    }\n    //filter accoring to tags\n    if (selectedtags.length !== 0) {\n      array2 = array2.filter((item) => {\n        var flag = false;\n        for (var i = 0; i < item.tags.length; i++) {\n          if (selectedtags.includes(item.tags[i])) {\n            flag = true;\n          }\n        }\n        return flag;\n      });\n    }\n\n    if (props === 1)\n      //ascending by price\n      array2 = array2.sort((a, b) => a.price - b.price);\n    else if (props === 2)\n      //descending by price\n      array2 = array2.sort((a, b) => b.price - a.price);\n    else if (props === 3)\n     { //ascending by rating\n      array2 = array2.sort((a, b) => \n        //take care of division by zero\n        {if(a.ratingcount === 0)\n          return -1;\n        else if(b.ratingcount === 0)\n          return 1;\n        else\n          return a.rating/a.ratingcount - b.rating/b.ratingcount;\n        })}\n    else if (props === 4)\n      //descending by rating\n      {\n        array2 = array2.sort((a, b) => \n        //take care of division by zero\n        {if(a.ratingcount === 0)\n          return 1;\n        else if(b.ratingcount === 0)\n          return -1;\n        else\n          return b.rating/b.ratingcount - a.rating/a.ratingcount;\n        })}\n\n    //   const fuse1 = new Fuse(array3, {\n    //     keys: [\"itemname\"],\n    // })\n\n    if (search !== \"\") {\n      //implement fuzzy search\n      // const result = fuse1.search(search);\n      // //store all result.item in array3\n      // for (var i = 0; i < result.length; i++) {\n      //   array3.push(result[i].item);\n      array3 = array3.filter((item) =>\n        item.itemname.toLowerCase().includes(search.toLowerCase())\n      );\n    }\n\n    //filter according to veg and nonveg\n    if (vegtrue === true && nonvegtrue === false) {\n      array3 = array3.filter((item) => item.veg === true);\n    } else if (vegtrue === false && nonvegtrue === true) {\n      array3 = array3.filter((item) => item.veg === false);\n    }\n    // //filter according to price\n    if (minprice !== \"\" && maxprice !== \"\") {\n      array3 = array3.filter(\n        (item) => item.price >= minprice && item.price <= maxprice\n      );\n    } else if (minprice !== \"\") {\n      array3 = array3.filter((item) => item.price >= minprice);\n    } else if (maxprice !== \"\") {\n      array3 = array3.filter((item) => item.price <= maxprice);\n    } else if (minprice === \"\" && maxprice === \"\") {\n      array3 = array3.filter((item) => item.price >= 0 && item.price <= 100000);\n    }\n    // //filter according to shopname\n    if (selectedshopnames.length !== 0) {\n      array3 = array3.filter((item) =>\n        selectedshopnames.includes(item.shopname)\n      );\n    }\n    //filter accoring to tags\n    if (selectedtags.length !== 0) {\n      array3 = array3.filter((item) => {\n        var flag = false;\n        for (var i = 0; i < item.tags.length; i++) {\n          if (selectedtags.includes(item.tags[i])) {\n            flag = true;\n          }\n        }\n        return flag;\n      });\n    }\n\n    if (props === 1)\n      //ascending by price\n      array3 = array3.sort((a, b) => a.price - b.price);\n    else if (props === 2)\n      //descending by price\n      array3 = array3.sort((a, b) => b.price - a.price);\n    else if (props === 3)\n      //ascending by rating\n      {\n        array3 = array3.sort((a, b) => \n        //take care of division by zero\n        {if(a.ratingcount === 0)\n          return -1;\n        else if(b.ratingcount === 0)\n          return 1;\n        else\n          return a.rating/a.ratingcount - b.rating/b.ratingcount;\n        })}\n    else if (props === 4)\n      //descending by rating\n      {\n        array3 = array3.sort((a, b) =>\n        //take care of division by zero\n        {if(a.ratingcount === 0)\n          return 1;\n        else if(b.ratingcount === 0)\n          return -1;\n        else\n          return b.rating/b.ratingcount - a.rating/a.ratingcount;\n        })}\n    // Filter out only open shops\n    //Store rest of the data in array3\n    setMenu(array2);\n    //setSortedMenu(array2);\n    // setSortedMenu2(array3);\n  };\n  return (\n    // Dont render until refresh is true\n    //array2 and array3 is empty\n\n    <div>\n      <div>\n        <Box\n          display=\"flex\"\n          flexDirection=\"row\"\n          alignItems=\"right\"\n          justifyContent=\"right\"\n          p={1}\n          m={1}\n          css={{ maxWidth: \"100%\" }}\n        >\n          <TextField\n            id=\"outlined-basic\"\n            label=\"Wallet\"\n            variant=\"filled\"\n            value={wallet}\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          \n        </Box>\n        <Box\n          display=\"flex\"\n          flexDirection=\"row\"\n          alignItems=\"right\"\n          justifyContent=\"right\"\n          p={1}\n          m={1}\n          css={{ maxWidth: \"100%\" }}\n        >\n        <Button variant=\"contained\" color=\"primary\" \n          onClick={() => {\n            handlefilter(0);\n          }}>\n            Set/Reset\n          </Button>\n        </Box>\n      </div>\n      <div>\n        <Box sx={{ flexGrow: 1 }}>\n          <AppBar position=\"static\">\n            <Toolbar variant=\"dense\">\n              <IconButton\n                size=\"large\"\n                edge=\"start\"\n                color=\"inherit\"\n                aria-label=\"menu\"\n                sx={{ mr: 2 }}\n              >\n                <MenuIcon />\n              </IconButton>\n              <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n                Favourites\n              </Typography>\n            </Toolbar>\n          </AppBar>\n        </Box>\n        <Fav />\n      </div>\n      {/* Filters */}\n\n      <div>\n        <Box\n          component=\"form\"\n          sx={{\n            \"& > :not(style)\": { m: 1, width: \"25ch\" },\n          }}\n          noValidate\n          autoComplete=\"off\"\n        >\n          <TextField\n            id=\"outlined-basic\"\n            label=\"Search\"\n            variant=\"outlined\"\n            //Search for items which includes the word and refresh the menu\n            //lowercase\n            onChange={(e) => {\n              setSearch(e.target.value);\n            }}\n          />\n\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={vegtrue}\n                  label=\"Veg\"\n                  //pass checkbox value to handlecheckboxes\n                  onChange={(e) => {\n                    setVegtrue(e.target.checked);\n                  }}\n                  inputProps={{ \"aria-label\": \"primary checkbox\" }}\n                />\n              }\n              label=\"Veg\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={nonvegtrue}\n                  label=\"Non-Veg\"\n                  onChange={(e) => {\n                    setNonvegtrue(e.target.checked);\n                  }}\n                  inputProps={{ \"aria-label\": \"primary checkbox\" }}\n                />\n              }\n              label=\"Non-Veg\"\n            />\n          </FormGroup>\n        </Box>\n        <br />\n        {/* Price range having minimum and maximum values */}\n        <Box\n          component=\"form\"\n          sx={{\n            \"& > :not(style)\": { m: 1, width: \"25ch\", height: \"7ch\" },\n          }}\n          noValidate\n          autoComplete=\"off\"\n        >\n          <TextField\n            id=\"outlined-basic\"\n            label=\"Minimum Price\"\n            variant=\"outlined\"\n            type=\"number\"\n            onChange={(e) => {\n              setMinPrice(e.target.value);\n            }}\n          />\n          <TextField\n            id=\"outlined-basic\"\n            label=\"Maximum Price\"\n            variant=\"outlined\"\n            type=\"number\"\n            onChange={(e) => {\n              setMaxPrice(e.target.value);\n            }}\n          />\n        </Box>\n        {/* <br /> */}\n        <Box\n          component=\"form\"\n          sx={{\n            \"& > :not(style)\": { m: 1, width: \"25ch\" },\n          }}\n          noValidate\n          autoComplete=\"off\"\n        >\n          {/* Create multiselect for selecting shops */}\n          <FormControl variant=\"outlined\">\n            <InputLabel id=\"demo-simple-select-outlined-label\">\n              Select Shop\n            </InputLabel>\n            <Select\n              labelId=\"demo-simple-select-outlined-label\"\n              id=\"demo-simple-select-outlined\"\n              defaultValue={\"\"}\n              multiple\n              value={selectedshopnames}\n              onChange={(e) => {\n                setSelectedshopnames(e.target.value);\n              }}\n              label=\"Select Shop\"\n            >\n              {shopnames.map((item) => {\n                return (\n                  <MenuItem key={item} value={item}>\n                    {item}\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n\n          {/* Create multiselect for selecting tags */}\n          <FormControl variant=\"outlined\">\n            <InputLabel id=\"demo-simple-select-outlined-label\">\n              Select Tags\n            </InputLabel>\n            <Select\n              labelId=\"demo-simple-select-outlined-label\"\n              id=\"demo-simple-select-outlined\"\n              defaultValue={\"\"}\n              multiple\n              value={selectedtags}\n              onChange={(e) => {\n                setSelectedtags(e.target.value);\n              }}\n              label=\"Select Tags\"\n            >\n              {tags.map((item) => {\n                return (\n                  <MenuItem key={item} value={item}>\n                    {item}\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n        </Box>\n        <Box\n          component=\"form\"\n          sx={{\n            \"& > :not(style)\": { m: 1, width: \"25ch\", height: \"7ch\" },\n          }}\n          noValidate\n          autoComplete=\"off\"\n        >\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => {\n              handlefilter(0);\n            }}\n          >\n            Filter\n          </Button>\n        </Box>\n        <Box\n          component=\"form\"\n          sx={{\n            \"& > :not(style)\": { m: 1, width: \"25ch\", height: \"7ch\" },\n          }}\n          noValidate\n          autoComplete=\"off\"\n        >\n          {/* Ascending by price button */}\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              handlefilter(1);\n            }}\n          >\n            Ascending by Price\n          </Button>\n          {/* Descending by price button */}\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              handlefilter(2);\n            }}\n          >\n            Descending by Price\n          </Button>\n          {/* Ascending by rating */}\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              handlefilter(3);\n            }}\n          >\n            Ascending by Rating\n          </Button>\n          {/* Descending by rating */}\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              handlefilter(4);\n            }}\n          >\n            Descending by Rating\n          </Button>\n        </Box>\n      </div>\n      <div>\n        <Box sx={{ flexGrow: 1 }}>\n          <AppBar position=\"static\">\n            <Toolbar variant=\"dense\">\n              <IconButton\n                size=\"large\"\n                edge=\"start\"\n                color=\"inherit\"\n                aria-label=\"menu\"\n                sx={{ mr: 2 }}\n              >\n                <MenuIcon />\n              </IconButton>\n              <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n                Menu\n              </Typography>\n            </Toolbar>\n          </AppBar>\n        </Box>\n      </div>\n      {/* Menu */}\n      <Box>\n        <TableContainer component={Paper}>\n          <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell>ItemName</TableCell>\n                <TableCell align=\"center\">Image</TableCell>\n                <TableCell align=\"center\">ShopName</TableCell>\n                <TableCell align=\"center\">Price</TableCell>\n                <TableCell align=\"center\">Veg/Non-Veg</TableCell>\n                <TableCell align=\"center\">Tags</TableCell>\n                {/* Buying Stages */}\n                <TableCell align=\"center\">AddOns</TableCell>\n                <TableCell align=\"center\">Rating</TableCell>\n                <TableCell align=\"center\"></TableCell>\n                <TableCell align=\"center\"></TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {array2.map((row) => (\n                <TableRow\n                  key={row._id}\n                  sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                >\n                  <TableCell component=\"th\" scope=\"row\">\n                    {row.itemname}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <img\n                      src={row.image}\n                      alt=\"food\"\n                      style={{ width: \"120px\", height: \"100px\" }}\n                    />\n                  </TableCell>\n                  <TableCell align=\"center\">{row.shopname}</TableCell>\n                  <TableCell align=\"center\">Rs.{row.price}</TableCell>\n                  <TableCell align=\"center\">\n                    {row.veg === true ? \"Veg\" : \"Non-Veg\"}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {row.tags.map((tag) => (\n                      <div spacing={2} key={tag}>\n                        <Stack spacing={2}>\n                          <Chip label={tag} key={tag} />\n                        </Stack>\n                      </div>\n                    ))}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {row.addonname.map((addon, index) => (\n                      <div spacing={2} key={index}>\n                        <Stack spacing={2}>\n                          {/* Addonname and addonprice */}\n                          <Chip\n                            label={`${addon}: Rs.${row.addonprice[index]}`}\n                            key={index}\n                          />\n                        </Stack>\n                      </div>\n                    ))}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {/* Rating */}\n                    <Rating\n                      name=\"read-only\"\n                      //value = floor(row.rating)/row.ratingcount\n                      value={\n                        row.ratingcount === 0\n                          ? 0\n                          : Math.floor(row.rating / row.ratingcount)\n                      }\n                      readOnly\n                      size=\"small\"\n                    />\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Button\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      onClick={() => handlefavourite(row._id)}\n                    >\n                      Add to Favourites\n                    </Button>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Button\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      onClick={() => handleClickOpen(row._id)}\n                    >\n                      Buy\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        {open ? (\n          <SimpleDialog\n            selectedValue={selectedValue}\n            open={open}\n            onClose={handleClose}\n          />\n        ) : null}\n      </Box>\n      {/* Unavailable */}\n\n      <div>\n        <Box sx={{ flexGrow: 1 }}>\n          <AppBar position=\"static\">\n            <Toolbar variant=\"dense\">\n              <IconButton\n                size=\"large\"\n                edge=\"start\"\n                color=\"inherit\"\n                aria-label=\"menu\"\n                sx={{ mr: 2 }}\n              >\n                <MenuIcon />\n              </IconButton>\n              <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n                Menu (Not Open)\n              </Typography>\n            </Toolbar>\n          </AppBar>\n        </Box>\n      </div>\n      {/* Menu */}\n      <Box>\n        <TableContainer component={Paper}>\n          <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell>ItemName</TableCell>\n                <TableCell align=\"center\">Image</TableCell>\n                <TableCell align=\"center\">ShopName</TableCell>\n                <TableCell align=\"center\">Price</TableCell>\n                <TableCell align=\"center\">Veg/Non-Veg</TableCell>\n                <TableCell align=\"center\">Tags</TableCell>\n                {/* Buying Stages */}\n                <TableCell align=\"center\">AddOns</TableCell>\n                <TableCell align=\"center\">Rating</TableCell>\n                <TableCell align=\"center\"></TableCell>\n                <TableCell align=\"center\"></TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {array3.map((row) => (\n                <TableRow\n                  key={row._id}\n                  sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                >\n                  <TableCell component=\"th\" scope=\"row\">\n                    {row.itemname}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <img\n                      src={row.image}\n                      alt=\"food\"\n                      style={{ width: \"120px\", height: \"100px\" }}\n                    />\n                  </TableCell>\n                  <TableCell align=\"center\">{row.shopname}</TableCell>\n                  <TableCell align=\"center\">Rs.{row.price}</TableCell>\n                  <TableCell align=\"center\">\n                    {row.veg === true ? \"Veg\" : \"Non-Veg\"}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {row.tags.map((tag) => (\n                      <div spacing={2} key={tag}>\n                        <Stack spacing={2}>\n                          <Chip label={tag} key={tag} />\n                        </Stack>\n                      </div>\n                    ))}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {row.addonname.map((addon, index) => (\n                      <div spacing={2} key={index}>\n                        <Stack spacing={2}>\n                          {/* Addonname and addonprice */}\n                          <Chip\n                            label={`${addon}: Rs.${row.addonprice[index]}`}\n                            key={index}\n                          />\n                        </Stack>\n                      </div>\n                    ))}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {/* Rating */}\n                    <Rating\n                      name=\"read-only\"\n                      value={\n                        row.ratingcount === 0\n                          ? 0\n                          : Math.floor(row.rating / row.ratingcount)\n                      }\n                      readOnly\n                      size=\"small\"\n                    />\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Button\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      onClick={() => handlefavourite(row._id)}\n                    >\n                      Add to Favourites\n                    </Button>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Button\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      disabled\n                      onClick={() => handleClickOpen(row._id)}\n                    >\n                      Buy\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        {open ? (\n          <SimpleDialog\n            selectedValue={selectedValue}\n            open={open}\n            onClose={handleClose}\n          />\n        ) : null}\n      </Box>\n    </div>\n  );\n}\n\nfunction SimpleDialog(props) {\n  const { onClose, selectedValue, open } = props;\n  const [quantity, setQuantity] = useState(1);\n  const [itemname, setItemname] = useState(\"\");\n  const [shopname, setShopname] = useState(\"\");\n  const [vendoremail, setVendoremail] = useState(\"\");\n  const [price, setPrice] = useState(0);\n  const [addonname, setAddonname] = useState([]);\n  const [addonprice, setAddonprice] = useState([]);\n  const [selectedaddonname, setSelectedaddonname] = useState([]);\n  const [selectedaddonprice, setSelectedaddonprice] = useState([]);\n  const [totalprice, setTotalprice] = useState(0);\n  const handleClose = () => {\n    onClose();\n  };\n  const handlebuy = () => {\n    //get time in int\n    const time = new Date().getTime();\n    // convert quantity to int\n    const q = parseInt(quantity);\n    var p = parseInt(price);\n    // run loop on addonprice\n    for (let i = 0; i < selectedaddonprice.length; i++) {\n      // convert addonprice to int\n      const ap = parseInt(selectedaddonprice[i]);\n      // add addonprice to p\n      p = p + ap;\n    }\n    // add quantity to p\n    p = p * q;\n    if (p > ls.get(\"wallet\")) {\n      alert(\"Insufficient Balance\");\n      onClose();\n    } else {\n      console.log({\n        itemname: itemname,\n        shopname: shopname,\n        price: price,\n        addonname: selectedaddonname,\n        addonprice: selectedaddonprice,\n        quantity: q,\n        totalprice: p,\n        time: time,\n      });\n      axios\n        .post(\"https://gateway-to-food.herokuapp.com/buyer/orderitem\", {\n          item_id: selectedValue,\n          itemname: itemname,\n          vendoremail: vendoremail,\n          shopname: shopname,\n          buyeremail: ls.get(\"email\"),\n          buyername: ls.get(\"username\"),\n          placedtime: time,\n          quantity: q,\n          addonname: selectedaddonname,\n          addonprice: selectedaddonprice,\n          totalprice: p,\n        })\n        .then((res) => {\n          console.log(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      //deduct money\n      axios\n        .post(\"https://gateway-to-food.herokuapp.com/buyer/deductmoney\", {\n          email: ls.get(\"email\"),\n          amount: p,\n        })\n        .then((res) => {\n          console.log(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      onClose();\n    }\n  };\n\n  const [refresh, setRefresh] = useState(false);\n\n  useEffect(() => {\n    axios\n      .post(\"https://gateway-to-food.herokuapp.com/buyer/getitem\", {\n        _id: selectedValue,\n      })\n      .then((res) => {\n        setItemname(res.data.itemname);\n        setShopname(res.data.shopname);\n        setPrice(res.data.price);\n        setAddonname(res.data.addonname);\n        setAddonprice(res.data.addonprice);\n        setVendoremail(res.data.manageremail);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    if (selectedValue === \"\" || selectedValue === undefined) {\n      setRefresh(!refresh);\n    }\n  }, [refresh]);\n\n  return (\n    <Dialog onClose={handleClose} open={open}>\n      <DialogTitle>A few more steps...</DialogTitle>\n      <br></br>\n      {/* Details of the product */}\n      {/* {selectedValue} */}\n      <Box>\n        <Stack spacing={2}>\n          <TextField\n            id=\"outlined-basic\"\n            label=\"ItemName\"\n            variant=\"outlined\"\n            value={itemname}\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          <TextField\n            id=\"outlined-basic\"\n            label=\"ShopName\"\n            variant=\"outlined\"\n            value={shopname}\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          <TextField\n            id=\"outlined-basic\"\n            label=\"Price\"\n            variant=\"outlined\"\n            value={price}\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          <TextField\n            id=\"quantity\"\n            label=\"Quantity\"\n            type=\"number\"\n            variant=\"outlined\"\n            defaultValue={1}\n            onChange={(e) => {\n              setQuantity(e.target.value);\n            }}\n          />\n          {/* Multi select AddOns */}\n          <FormControl variant=\"outlined\">\n            <InputLabel id=\"demo-simple-select-outlined-label\">\n              AddOns\n            </InputLabel>\n            <Select\n              labelId=\"demo-simple-select-outlined-label\"\n              id=\"demo-simple-select-outlined\"\n              multiple\n              value={selectedaddonname}\n              onChange={(e) => {\n                setSelectedaddonname(e.target.value);\n                // Set selectedaddonprice as the same index as selectedaddonname\n                setSelectedaddonprice(\n                  e.target.value.map((addon) => {\n                    return addonprice[addonname.indexOf(addon)];\n                  })\n                );\n              }}\n              label=\"AddOns\"\n              variant=\"outlined\"\n            >\n              {addonname.map((addon) => (\n                <MenuItem key={addon} value={addon}>\n                  {addon}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Stack>\n      </Box>\n      <br></br>\n      <Button variant=\"contained\" color=\"primary\" onClick={handlebuy}>\n        Buy\n      </Button>\n      {/* Set quantity to order */}\n    </Dialog>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}